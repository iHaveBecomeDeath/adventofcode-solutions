var allInstructions = 
"turn on 489,959 through 759,964_turn off 820,516 through 871,914_turn off 427,423 through 929,502_turn on 774,14 through 977,877_turn on 410,146 through 864,337_turn on 931,331 through 939,812_turn off 756,53 through 923,339_turn off 313,787 through 545,979_turn off 12,823 through 102,934_toggle 756,965 through 812,992_turn off 743,684 through 789,958_toggle 120,314 through 745,489_toggle 692,845 through 866,994_turn off 587,176 through 850,273_turn off 674,321 through 793,388_toggle 749,672 through 973,965_turn on 943,30 through 990,907_turn on 296,50 through 729,664_turn on 212,957 through 490,987_toggle 171,31 through 688,88_turn off 991,989 through 994,998_turn off 913,943 through 958,953_turn off 278,258 through 367,386_toggle 275,796 through 493,971_turn off 70,873 through 798,923_toggle 258,985 through 663,998_turn on 601,259 through 831,486_turn off 914,94 through 941,102_turn off 558,161 through 994,647_turn on 119,662 through 760,838_toggle 378,775 through 526,852_turn off 384,670 through 674,972_turn off 249,41 through 270,936_turn on 614,742 through 769,780_turn on 427,70 through 575,441_turn on 410,478 through 985,753_turn off 619,46 through 931,342_turn on 284,55 through 768,922_turn off 40,592 through 728,685_turn on 825,291 through 956,950_turn on 147,843 through 592,909_turn off 218,675 through 972,911_toggle 249,291 through 350,960_turn off 556,80 through 967,675_toggle 609,148 through 968,279_toggle 217,605 through 961,862_toggle 407,177 through 548,910_toggle 400,936 through 599,938_turn off 721,101 through 925,455_turn on 268,631 through 735,814_toggle 549,969 through 612,991_toggle 553,268 through 689,432_turn off 817,668 through 889,897_toggle 801,544 through 858,556_toggle 615,729 through 832,951_turn off 427,477 through 958,948_turn on 164,49 through 852,946_turn on 542,449 through 774,776_turn off 923,196 through 980,446_toggle 90,310 through 718,846_turn off 657,215 through 744,252_turn off 800,239 through 811,712_turn on 502,90 through 619,760_toggle 649,512 through 862,844_turn off 334,903 through 823,935_turn off 630,233 through 839,445_turn on 713,67 through 839,865_turn on 932,50 through 982,411_turn off 480,729 through 984,910_turn on 100,219 through 796,395_turn on 758,108 through 850,950_turn off 427,276 through 439,938_turn on 178,284 through 670,536_toggle 540,27 through 625,102_turn off 906,722 through 936,948_toggle 345,418 through 859,627_toggle 175,775 through 580,781_toggle 863,28 through 929,735_turn off 824,858 through 905,973_toggle 752,312 through 863,425_turn on 985,716 through 988,852_turn off 68,504 through 763,745_toggle 76,209 through 810,720_turn off 657,607 through 676,664_toggle 596,869 through 896,921_turn off 915,411 through 968,945_turn off 368,39 through 902,986_turn on 11,549 through 393,597_turn off 842,893 through 976,911_toggle 274,106 through 581,329_toggle 406,403 through 780,950_toggle 408,988 through 500,994_toggle 217,73 through 826,951_turn on 917,872 through 961,911_toggle 394,34 through 510,572_toggle 424,603 through 583,626_toggle 106,159 through 755,738_turn off 244,610 through 472,709_turn on 350,265 through 884,690_turn on 688,184 through 928,280_toggle 279,443 through 720,797_turn off 615,493 through 888,610_toggle 118,413 through 736,632_turn on 798,782 through 829,813_turn off 250,934 through 442,972_turn on 68,503 through 400,949_toggle 297,482 through 313,871_toggle 710,3 through 839,859_turn on 125,300 through 546,888_toggle 482,39 through 584,159_turn off 536,89 through 765,962_turn on 530,518 through 843,676_turn on 994,467 through 994,676_turn on 623,628 through 744,927_toggle 704,912 through 837,983_turn on 154,364 through 517,412_toggle 344,409 through 780,524_turn off 578,740 through 725,879_turn on 251,933 through 632,957_turn on 827,705 through 971,789_toggle 191,282 through 470,929_toggle 324,525 through 446,867_toggle 534,343 through 874,971_toggle 550,650 through 633,980_toggle 837,404 through 881,915_toggle 338,881 through 845,905_turn on 469,462 through 750,696_turn on 741,703 through 892,870_turn off 570,215 through 733,562_turn on 445,576 through 870,775_turn on 466,747 through 554,878_turn off 820,453 through 868,712_turn off 892,706 through 938,792_turn off 300,238 through 894,746_turn off 306,44 through 457,444_turn off 912,569 through 967,963_toggle 109,756 through 297,867_turn on 37,546 through 41,951_turn on 321,637 through 790,910_toggle 66,50 through 579,301_toggle 933,221 through 933,791_turn on 486,676 through 878,797_turn on 417,231 through 556,317_toggle 904,468 through 981,873_turn on 417,675 through 749,712_turn on 692,371 through 821,842_toggle 324,73 through 830,543_turn on 912,490 through 977,757_turn off 634,872 through 902,949_toggle 266,779 through 870,798_turn on 772,982 through 990,996_turn off 607,46 through 798,559_turn on 295,602 through 963,987_turn on 657,86 through 944,742_turn off 334,639 through 456,821_turn off 997,667 through 997,670_turn off 725,832 through 951,945_turn off 30,120 through 952,984_turn on 860,965 through 917,976_toggle 471,997 through 840,998_turn off 319,307 through 928,504_toggle 823,631 through 940,908_toggle 969,984 through 981,993_turn off 691,319 through 865,954_toggle 911,926 through 938,929_turn on 953,937 through 968,991_toggle 914,643 through 975,840_turn on 266,982 through 436,996_turn off 101,896 through 321,932_turn off 193,852 through 751,885_turn off 576,532 through 863,684_turn on 761,456 through 940,783_turn on 20,290 through 398,933_turn off 435,335 through 644,652_turn on 830,569 through 905,770_turn off 630,517 through 905,654_turn on 664,53 through 886,976_toggle 275,416 through 408,719_turn on 370,621 through 515,793_turn on 483,373 through 654,749_turn on 656,786 through 847,928_turn off 532,752 through 945,974_toggle 301,150 through 880,792_turn off 951,488 through 958,952_turn on 207,729 through 882,828_toggle 694,532 through 973,961_toggle 676,639 through 891,802_turn off 653,6 through 905,519_toggle 391,109 through 418,312_turn on 877,423 through 957,932_turn on 340,145 through 563,522_turn off 978,467 through 988,895_turn off 396,418 through 420,885_turn off 31,308 through 816,316_turn on 107,675 through 758,824_turn on 61,82 through 789,876_turn on 750,743 through 754,760_toggle 88,733 through 736,968_turn off 754,349 through 849,897_toggle 157,50 through 975,781_turn off 230,231 through 865,842_turn off 516,317 through 630,329_turn off 697,820 through 829,903_turn on 218,250 through 271,732_toggle 56,167 through 404,431_toggle 626,891 through 680,927_toggle 370,207 through 791,514_toggle 860,74 through 949,888_turn on 416,527 through 616,541_turn off 745,449 through 786,908_turn on 485,554 through 689,689_turn on 586,62 through 693,141_toggle 506,759 through 768,829_turn on 473,109 through 929,166_turn on 760,617 through 773,789_toggle 595,683 through 618,789_turn off 210,775 through 825,972_toggle 12,426 through 179,982_turn on 774,539 through 778,786_turn on 102,498 through 121,807_turn off 706,897 through 834,965_turn off 678,529 through 824,627_turn on 7,765 through 615,870_turn off 730,872 through 974,943_turn off 595,626 through 836,711_turn off 215,424 through 841,959_toggle 341,780 through 861,813_toggle 507,503 through 568,822_turn on 252,603 through 349,655_toggle 93,521 through 154,834_turn on 565,682 through 951,954_turn on 544,318 through 703,418_toggle 756,953 through 891,964_turn on 531,123 through 856,991_turn on 148,315 through 776,559_turn off 925,835 through 963,971_turn on 895,944 through 967,964_turn off 102,527 through 650,747_toggle 626,105 through 738,720_turn off 160,75 through 384,922_toggle 813,724 through 903,941_turn on 207,107 through 982,849_toggle 750,505 through 961,697_toggle 105,410 through 885,819_turn on 226,104 through 298,283_turn off 224,604 through 508,762_turn on 477,368 through 523,506_turn off 477,901 through 627,936_turn off 887,131 through 889,670_turn on 896,994 through 938,999_toggle 401,580 through 493,728_toggle 987,184 through 991,205_turn on 821,643 through 882,674_toggle 784,940 through 968,959_turn off 251,293 through 274,632_turn off 339,840 through 341,844_turn off 675,351 through 675,836_toggle 918,857 through 944,886_toggle 70,253 through 918,736_turn off 612,604 through 772,680_turn off 277,40 through 828,348_toggle 692,139 through 698,880_toggle 124,446 through 883,453_toggle 969,932 through 990,945_toggle 855,692 through 993,693_toggle 722,472 through 887,899_toggle 978,149 through 985,442_toggle 837,540 through 916,889_turn off 612,2 through 835,82_toggle 560,767 through 878,856_turn on 461,734 through 524,991_toggle 206,824 through 976,912_turn on 826,610 through 879,892_turn on 577,699 through 956,933_turn off 9,250 through 50,529_turn off 77,657 through 817,677_turn on 68,419 through 86,426_turn on 991,720 through 992,784_turn on 668,20 through 935,470_turn off 133,418 through 613,458_turn off 487,286 through 540,328_toggle 247,874 through 840,955_toggle 301,808 through 754,970_turn off 34,194 through 578,203_turn off 451,49 through 492,921_turn on 907,256 through 912,737_turn off 479,305 through 702,587_turn on 545,583 through 732,749_toggle 11,16 through 725,868_turn on 965,343 through 986,908_turn on 674,953 through 820,965_toggle 398,147 through 504,583_turn off 778,194 through 898,298_turn on 179,140 through 350,852_turn off 241,118 through 530,832_turn off 41,447 through 932,737_turn off 820,663 through 832,982_turn on 550,460 through 964,782_turn on 31,760 through 655,892_toggle 628,958 through 811,992";

function interpretInstructions(instruction){
	var regex = /(toggle\s|turn\son\s|turn\soff\s|through\s)([0-9]+),([0-9]+)/gi;
	var actions = [];
	var xy = [];
	while (xy = regex.exec(instruction)){
		actions.push(xy[1],xy[2],xy[3]);
	}
	return actions;
}
function initializeLights(){
	return [].fill.call(
		{ length:1000 }, [].fill.call({ length:1000 }, 0)
	);
}
var lights = initializeLights();var execInstructions = function(instr){
	for (var i = instr[1]; i <= instr[4]; i++){
		for (var j = instr[2]; j <= instr[5]; j++){
			var newVal = 0;
//			console.log(instr[0]);
			switch (instr[0].trim()){
				case 'turn on':
					newVal = 1;
					break;
				case 'toggle':
					if (lights[i][j] === 0){
						newVal = 1;
					}
					break;
					// turn off and toggle off handled by default
			}
			lights[i][j] = newVal; 
//			console.log(i,j, 'should be', newVal);			
//			console.log('lights',i,j,'new val', lights[i][j]);
		}
	}
}

var countLights = function(){
	var count = 0;
	for (var i = 0; i < 1000; i++){
		for(var j = 0; j < 1000; j++){
			if(lights[i][j] === 1){
				count++;
			}
		}
	}
	return count;
}

// allInstructions.split('_').forEach(function(element) {
// 	console.log(element);
// 	var currentInstruction = interpretInstructions(element);
// 	execInstructions(currentInstruction);
// 	console.log('results in count', countLights());
// });
var ins1 = interpretInstructions('turn on 0,0 through 1,33');
execInstructions(ins1);
console.log(ins1, 'results in', countLights(), 'lights');
console.log(execInstructions(interpretInstructions('toggle 0,0 through 1,31')));
console.log(interpretInstructions('turn off 499,499 through 500,500'));
